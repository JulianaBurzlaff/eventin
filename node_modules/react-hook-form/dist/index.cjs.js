"use strict";function e(e){if(e&&e.__esModule)return e;var r=Object.create(null);return e&&Object.keys(e).forEach((function(t){if("default"!==t){var n=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(r,t,n.get?n:{enumerable:!0,get:function(){return e[t]}})}})),r.default=e,Object.freeze(r)}Object.defineProperty(exports,"__esModule",{value:!0});var r=e(require("react")),t=e=>"checkbox"===e.type,n=e=>null==e;const s=e=>"object"==typeof e;var u=e=>!n(e)&&!Array.isArray(e)&&s(e)&&!(e instanceof Date),a=e=>e.substring(0,e.search(/.\d/))||e,c=(e,r)=>[...e].some(e=>a(r)===e),i=e=>e.filter(Boolean),o=e=>void 0===e,l=(e,r,t)=>{if(u(e)&&r){const s=i(r.split(/[,[\].]+?/)).reduce((e,r)=>n(e)?e:e[r],e);return o(s)||s===e?o(e[r])?t:e[r]:s}};const f="blur",d="change",b="onBlur",y="onChange",g="onSubmit",m="onTouched",h="all",v="max",p="min",x="maxLength",O="minLength",w="pattern",j="required",A="validate";var k=(e,r)=>{const t=Object.assign({},e);return delete t[r],t};const V=r.createContext(null);V.displayName="RHFContext";const F=()=>r.useContext(V);var _=(e,r,t,n,s=!0)=>e?new Proxy(r,{get:(e,r)=>{if(r in e)return t.current[r]!==h&&(t.current[r]=!s||h),n&&(n.current[r]=!0),e[r]}}):r,C=e=>u(e)&&!Object.keys(e).length,R=(e,r,t)=>{const n=k(e,"name");return C(n)||Object.keys(n).length>=Object.keys(r).length||Object.keys(n).find(e=>r[e]===(!t||h))},S=e=>Array.isArray(e)?e:[e],D="undefined"!=typeof window&&void 0!==window.HTMLElement&&"undefined"!=typeof document;const E=D?"Proxy"in window:"undefined"!=typeof Proxy;function B(e){const{control:t,name:n}=e||{},s=F(),{formStateRef:u,subjectsRef:a,readFormStateRef:c}=t||s.control,i=r.useRef(n);i.current=n;const[o,l]=r.useState(u.current),f=r.useRef({isDirty:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1});return r.useEffect(()=>{const e=a.current.state.subscribe({next:e=>(!i.current||!e.name||S(i.current).includes(e.name))&&R(e,f.current)&&l(Object.assign(Object.assign({},u.current),e))});return()=>e.unsubscribe()},[]),_(E,o,c,f,!1)}function M({name:e,rules:n,defaultValue:s,control:a,shouldUnregister:i}){const b=F(),{defaultValuesRef:y,register:g,fieldsRef:m,unregister:h,namesRef:v,subjectsRef:p,shouldUnmount:x,inFieldArrayActionRef:O}=a||b.control,w=c(v.current.array,e),j=l(m.current,e),[A,k]=r.useState(!w&&j&&j._f?j._f.value:w||o(l(y.current,e))?s:l(y.current,e)),{onChange:V,onBlur:_,ref:C}=g(e,Object.assign(Object.assign({},n),{value:A})),R=B({control:a||b.control,name:e});return r.useEffect(()=>{const r=p.current.control.subscribe({next:r=>(!r.name||e===r.name)&&k(l(r.values,e))});return()=>{r.unsubscribe();const t=x||i;if(w?t&&!O.current:t)h(e);else{const r=l(m.current,e);r&&r._f&&(r._f.mount=!1)}}},[e]),{field:{onChange:r=>{const n=(e=>u(e)&&e.target?t(e.target)?e.target.checked:e.target.value:e)(r);k(n),V({target:{value:n,name:e},type:d})},onBlur:()=>{_({target:{name:e},type:f})},name:e,value:A,ref:e=>e&&C({focus:()=>e.focus&&e.focus()})},formState:R,fieldState:{invalid:!!l(R.errors,e),isDirty:!!l(R.dirtyFields,e),isTouched:!!l(R.touchedFields,e),error:l(R.errors,e)}}}var N=(e,r,t,n,s)=>r?Object.assign(Object.assign({},t[e]),{types:Object.assign(Object.assign({},t[e]&&t[e].types?t[e].types:{}),{[n]:s||!0})}):{},T=e=>/^\w*$/.test(e),I=e=>i(e.replace(/["|']|\]/g,"").split(/\.|\[/));function P(e,r,t){let n=-1;const s=T(r)?[r]:I(r),a=s.length,c=a-1;for(;++n<a;){const r=s[n];let a=t;if(n!==c){const t=e[r];a=u(t)||Array.isArray(t)?t:isNaN(+s[n+1])?{}:[]}e[r]=a,e=e[r]}return e}const U=(e,r,t)=>{for(const n of t||Object.keys(e)){const t=l(e,n);if(t){const e=t._f,n=k(t,"_f");if(e&&r(e.name)){if(e.ref.focus&&o(e.ref.focus()))break;if(e.refs){e.refs[0].focus();break}}else u(n)&&U(n,r)}}},$=(e,r={})=>{for(const t in e.current){const s=e.current[t];if(s&&!n(r)){const e=s._f,n=k(s,"_f");P(r,t,e&&e.ref?e.ref.disabled||e.refs&&e.refs.every(e=>e.disabled)?void 0:e.value:Array.isArray(s)?[]:{}),n&&$({current:n},r[t])}}return r};var L=()=>{const e="undefined"==typeof performance?Date.now():1e3*performance.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,r=>{const t=(16*Math.random()+e)%16|0;return("x"==r?t:3&t|8).toString(16)})},W=(e=[],r)=>e.map(e=>Object.assign({[r]:e&&e[r]||L()},e)),q=e=>n(e)||!s(e);function H(e,t,n){if(q(e)||q(t)||e instanceof Date||t instanceof Date)return e===t;if(!r.isValidElement(e)){const r=Object.keys(e),s=Object.keys(t);if(r.length!==s.length)return!1;for(const s of r){const r=e[s];if(!n||"ref"!==s){const e=t[s];if((u(r)||Array.isArray(r))&&(u(e)||Array.isArray(e))?!H(r,e,n):r!==e)return!1}}}return!0}function z(e,r,t,n,s){let u=-1;for(;++u<e.length;){for(const n in e[u])Array.isArray(e[u][n])?(!t[u]&&(t[u]={}),t[u][n]=[],z(e[u][n],l(r[u]||{},n,[]),t[u][n],t[u],n)):H(l(r[u]||{},n),e[u][n])?P(t[u]||{},n):t[u]=Object.assign(Object.assign({},t[u]),{[n]:!0});n&&!t.length&&delete n[s]}return t}var G=(e,r,t)=>function e(r,t){if(q(r)||q(t))return t;for(const n in t){const s=r[n],a=t[n];try{r[n]=u(s)&&u(a)||Array.isArray(s)&&Array.isArray(a)?e(s,a):a}catch(e){}}return r}(z(e,r,t.slice(0,e.length)),z(r,e,t.slice(0,e.length)));function J(e,r){return[...e,...S(r)]}var K=e=>Array.isArray(e)?Array(e.length).fill(void 0):void 0;function Q(e,r,t){return[...e.slice(0,r),...S(t),...e.slice(r)]}var X=(e,r,t)=>Array.isArray(e)?(o(e[t])&&(e[t]=void 0),e.splice(t,0,e.splice(r,1)[0]),e):[];function Y(e,r){return[...S(r),...e]}var Z=(e,r)=>o(r)?[]:function(e,r){let t=0;const n=[...e];for(const e of r)n.splice(e-t,1),t++;return i(n).length?n:[]}(e,S(r).sort((e,r)=>e-r)),ee=(e,r,t)=>{e[r]=[e[t],e[t]=e[r]][0]},re=e=>"boolean"==typeof e;function te(e,r){const t=T(r)?[r]:I(r),n=1==t.length?e:function(e,r){const t=r.slice(0,-1).length;let n=0;for(;n<t;)e=o(e)?n++:e[r[n++]];return e}(e,t),s=t[t.length-1];let a;n&&delete n[s];for(let r=0;r<t.slice(0,-1).length;r++){let n,s=-1;const c=t.slice(0,-(r+1)),i=c.length-1;for(r>0&&(a=e);++s<c.length;){const r=c[s];n=n?n[r]:e[r],i===s&&(u(n)&&C(n)||Array.isArray(n)&&!n.filter(e=>u(e)&&!C(e)||re(e)).length)&&(a?delete a[r]:delete e[r]),a=n}}return e}var ne=e=>"file"===e.type,se=e=>"select-multiple"===e.type,ue=e=>"radio"===e.type;const ae={value:!1,isValid:!1},ce={value:!0,isValid:!0};var ie=e=>{if(Array.isArray(e)){if(e.length>1){const r=e.filter(e=>e&&e.checked&&!e.disabled).map(e=>e.value);return{value:r,isValid:!!r.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!o(e[0].attributes.value)?o(e[0].value)||""===e[0].value?ce:{value:e[0].value,isValid:!0}:ce:ae}return ae},oe=(e,{valueAsNumber:r,valueAsDate:t,setValueAs:n})=>o(e)?e:r?""===e?NaN:+e:t?new Date(e):n?n(e):e;const le={isValid:!1,value:null};var fe=e=>Array.isArray(e)?e.reduce((e,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:e,le):le;function de(e){if(e&&e._f){const n=e._f.ref;if(n.disabled)return;return ne(n)?n.files:ue(n)?fe(e._f.refs).value:se(n)?(r=n.options,[...r].filter(({selected:e})=>e).map(({value:e})=>e)):t(n)?ie(e._f.refs).value:oe(o(n.value)?e._f.ref.value:n.value,e._f)}var r}var be=(e,r,t,n)=>{const s={};for(const t of e){const e=l(r,t);e&&P(s,t,e._f)}return{criteriaMode:t,names:[...e],fields:s,shouldUseNativeValidation:n}},ye=e=>"function"==typeof e,ge=e=>"string"==typeof e,me=e=>ge(e)||r.isValidElement(e),he=e=>e instanceof RegExp;function ve(e,r,t="validate"){if(me(e)||Array.isArray(e)&&e.every(me)||re(e)&&!e)return{type:t,message:me(e)?e:"",ref:r}}var pe=e=>u(e)&&!he(e)?e:{value:e,message:""},xe=async({_f:{ref:e,refs:r,required:s,maxLength:a,minLength:c,min:i,max:o,pattern:l,validate:f,name:d,value:b,valueAsNumber:y,mount:g}},m,h)=>{if(!g)return{};const k=r?r[0]:e,V=e=>{h&&k.reportValidity&&(k.setCustomValidity(re(e)?"":e||" "),k.reportValidity())},F={},_=ue(e),R=t(e),S=_||R,D=(y||ne(e))&&!e.value||""===b||Array.isArray(b)&&!b.length,E=N.bind(null,d,m,F),B=(r,t,n,s=x,u=O)=>{const a=r?t:n;F[d]=Object.assign({type:r?s:u,message:a,ref:e},E(r?s:u,a))};if(s&&(!S&&(D||n(b))||re(b)&&!b||R&&!ie(r).isValid||_&&!fe(r).isValid)){const{value:e,message:r}=me(s)?{value:!!s,message:s}:pe(s);if(e&&(F[d]=Object.assign({type:j,message:r,ref:k},E(j,r)),!m))return V(r),F}if(!(D||n(i)&&n(o))){let r,t;const s=pe(o),u=pe(i);if(isNaN(b)){const n=e.valueAsDate||new Date(b);ge(s.value)&&(r=n>new Date(s.value)),ge(u.value)&&(t=n<new Date(u.value))}else{const a=e.valueAsNumber||parseFloat(b);n(s.value)||(r=a>s.value),n(u.value)||(t=a<u.value)}if((r||t)&&(B(!!r,s.message,u.message,v,p),!m))return V(F[d].message),F}if((a||c)&&!D&&ge(b)){const e=pe(a),r=pe(c),t=!n(e.value)&&b.length>e.value,s=!n(r.value)&&b.length<r.value;if((t||s)&&(B(t,e.message,r.message),!m))return V(F[d].message),F}if(l&&!D&&ge(b)){const{value:r,message:t}=pe(l);if(he(r)&&!b.match(r)&&(F[d]=Object.assign({type:w,message:t,ref:e},E(w,t)),!m))return V(t),F}if(f)if(ye(f)){const e=ve(await f(b),k);if(e&&(F[d]=Object.assign(Object.assign({},e),E(A,e.message)),!m))return V(e.message),F}else if(u(f)){let e={};for(const r in f){if(!C(e)&&!m)break;const t=ve(await f[r](b),k,r);t&&(e=Object.assign(Object.assign({},t),E(r,t.message)),V(t.message),m&&(F[d]=e))}if(!C(e)&&(F[d]=Object.assign({ref:k},e),!m))return F}return V(!0),F},Oe=e=>({isOnSubmit:!e||e===g,isOnBlur:e===b,isOnChange:e===y,isOnAll:e===h,isOnTouch:e===m}),we=e=>e instanceof HTMLElement;class je{constructor(){this.tearDowns=[]}add(e){this.tearDowns.push(e)}unsubscribe(){for(const e of this.tearDowns)e();this.tearDowns=[]}}class Ae{constructor(e,r){this.observer=e,this.closed=!1,r.add(()=>this.closed=!0)}next(e){this.closed||this.observer.next(e)}}class ke{constructor(){this.observers=[]}next(e){for(const r of this.observers)r.next(e)}subscribe(e){const r=new je,t=new Ae(e,r);return this.observers.push(t),r}unsubscribe(){this.observers=[]}}const Ve="undefined"==typeof window;exports.Controller=e=>e.render(M(e)),exports.FormProvider=e=>r.createElement(V.Provider,{value:k(e,"children")},e.children),exports.appendErrors=N,exports.get=l,exports.set=P,exports.useController=M,exports.useFieldArray=({control:e,name:t,keyName:n="id",shouldUnregister:s})=>{const u=F(),c=r.useRef(""),o=r.useRef(!1),{getIsDirty:f,namesRef:d,fieldsRef:b,defaultValuesRef:y,formStateRef:g,subjectsRef:m,readFormStateRef:h,updateIsValid:v,fieldArrayDefaultValuesRef:p,unregister:x,shouldUnmount:O,inFieldArrayActionRef:w,register:j}=e||u.control,[A,V]=r.useState(W((l(b.current,t)&&o.current?l($(b),t):l(p.current,a(t))?l(p.current,t):l(y.current,t))||[],n));P(p.current,t,[...A]),d.current.array.add(t);const _=e=>e.map((e={})=>k(e,n)),C=()=>{const e=l($(b),t,[]);return W(l(p.current,t,[]).map((r,t)=>Object.assign(Object.assign({},r),e[t])),n)},R=(e,r)=>r&&!r.shouldFocus?r.focusName||`${t}.${r.focusIndex}.`:`${t}.${e}.`,D=(e=[])=>V(W(e,n)),E=e=>!i(l(e,t,[])).length&&te(e,t),B=(e,r,n=[],s=!0)=>{if(w.current=!0,l(b.current,t)){const n=e(l(b.current,t),r.argA,r.argB);s&&P(b.current,t,n)}if(Array.isArray(l(g.current.errors,t))){const n=e(l(g.current.errors,t),r.argA,r.argB);s&&P(g.current.errors,t,n),E(g.current.errors)}if(h.current.touchedFields&&l(g.current.touchedFields,t)){const n=e(l(g.current.touchedFields,t),r.argA,r.argB);s&&P(g.current.touchedFields,t,n),E(g.current.touchedFields)}(h.current.dirtyFields||h.current.isDirty)&&(P(g.current.dirtyFields,t,G(_(n),l(y.current,t,[]),l(g.current.dirtyFields,t,[]))),n&&P(g.current.dirtyFields,t,G(_(n),l(y.current,t,[]),l(g.current.dirtyFields,t,[]))),E(g.current.dirtyFields)),m.current.state.next({isDirty:f(t,_(n)),errors:g.current.errors,isValid:g.current.isValid})},M=(e,r=0,n="")=>e.forEach((e,s)=>{const u=`${n||t}.${n?s:r+s}`;q(e)?j(u,{value:e}):Object.entries(e).forEach(([e,r])=>{const t=u+"."+e;Array.isArray(r)?M(r,s,t):j(t,{value:q(r)?r:Object.assign({},r)})})});return r.useEffect(()=>{if(w.current=!1,d.current.watchAll)m.current.state.next({});else for(const e of d.current.watch)if(t.startsWith(e)){m.current.state.next({});break}m.current.watch.next({name:t,values:$(b)}),c.current&&U(b.current,e=>e.startsWith(c.current)),c.current="",m.current.array.next({name:t,values:_([...A])}),h.current.isValid&&v()},[A,t]),r.useEffect(()=>{const e=m.current.array.subscribe({next({name:e,values:r,isReset:n}){n&&(te(b.current,e||t),e?P(p.current,e,r):p.current=r,D(l(p.current,t)))}});return!l(b.current,t)&&P(b.current,t,[]),o.current=!0,()=>{if(e.unsubscribe(),O||s)x(t),te(p.current,t);else{const e=l($(b),t);e&&P(p.current,t,e)}}},[]),{swap:r.useCallback((e,r)=>{const t=C();ee(t,e,r),B(ee,{argA:e,argB:r},t,!1),D(t)},[t]),move:r.useCallback((e,r)=>{const t=C();X(t,e,r),D(t),B(X,{argA:e,argB:r},t,!1)},[t]),prepend:r.useCallback((e,r)=>{const t=S(e),n=Y(C(),t);D(n),B(Y,{argA:K(e)},n),M(t),c.current=R(0,r)},[t]),append:r.useCallback((e,r)=>{const t=S(e),n=J(C(),t),s=n.length-t.length;D(n),B(J,{argA:K(e)},n,!1),M(t,s),c.current=R(s,r)},[t]),remove:r.useCallback(e=>{const r=Z(C(),e);D(r),B(Z,{argA:e},r)},[t]),insert:r.useCallback((e,r,t)=>{const n=S(r),s=Q(C(),e,n);D(s),B(Q,{argA:e,argB:K(r)},s),M(n,e),c.current=R(e,t)},[t]),fields:A}},exports.useForm=function({mode:e=g,reValidateMode:s=y,resolver:d,context:b,defaultValues:m={},shouldFocusError:v=!0,shouldUseNativeValidation:p,shouldUnregister:x,criteriaMode:O}={}){const[w,j]=r.useState({isDirty:!1,isValidating:!1,dirtyFields:{},isSubmitted:!1,submitCount:0,touchedFields:{},isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,errors:{}}),A=r.useRef({isDirty:!E,dirtyFields:!E,touchedFields:!E,isValidating:!E,isValid:!E,errors:!E}),V=r.useRef(d),F=r.useRef(w),B=r.useRef({}),M=r.useRef(m),N=r.useRef({}),T=r.useRef(b),I=r.useRef(!1),L=r.useRef(!1),W=r.useRef({watch:new ke,control:new ke,array:new ke,state:new ke}),z=r.useRef({mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1}),J=Oe(e),K=O===h;V.current=d,T.current=b;const Q=e=>z.current.watchAll||z.current.watch.has(e)||z.current.watch.has((e.match(/\w+/)||[])[0]),X=r.useCallback(async(e,r,t,n,s,u)=>{const a=l(F.current.errors,r),c=!!A.current.isValid&&(d?s:await ce(B.current,!0));if(t?P(F.current.errors,r,t):te(F.current.errors,r),(u||(t?!H(a,t,!0):a)||!C(n)||F.current.isValid!==c)&&!e){const e=Object.assign(Object.assign({},n),{isValid:!!c,errors:F.current.errors,name:r});F.current=Object.assign(Object.assign({},F.current),e),W.current.state.next(u?{name:r}:e)}W.current.state.next({isValidating:!1})},[]),Y=r.useCallback((e,r,s={},u,a)=>{a&&Fe(e);const c=l(B.current,e);if(c){const a=c._f;if(a){const c=D&&we(a.ref)&&n(r)?"":r;if(a.value=oe(r,a),ue(a.ref)?(a.refs||[]).forEach(e=>e.checked=e.value===c):ne(a.ref)&&!ge(c)?a.ref.files=c:se(a.ref)?[...a.ref.options].forEach(e=>e.selected=c.includes(e.value)):t(a.ref)&&a.refs?a.refs.length>1?a.refs.forEach(e=>e.checked=Array.isArray(c)?!!c.find(r=>r===e.value):c===e.value):a.refs[0].checked=!!c:a.ref.value=c,u){const t=$(B);P(t,e,r),W.current.control.next({values:Object.assign(Object.assign({},M.current),t),name:e})}(s.shouldDirty||s.shouldTouch)&&ee(e,c,s.shouldTouch),s.shouldValidate&&ie(e)}else c._f={ref:{name:e,value:r},value:r}}},[]),Z=r.useCallback((e,r)=>{const t=$(B);return e&&r&&P(t,e,r),!H(t,M.current)},[]),ee=r.useCallback((e,r,t,n=!0)=>{const s={name:e};let u=!1;if(A.current.isDirty){const e=F.current.isDirty;F.current.isDirty=Z(),s.isDirty=F.current.isDirty,u=e!==s.isDirty}if(A.current.dirtyFields&&!t){const t=l(F.current.dirtyFields,e);!H(l(M.current,e),r)?P(F.current.dirtyFields,e,!0):te(F.current.dirtyFields,e),s.dirtyFields=F.current.dirtyFields,u=u||t!==l(F.current.dirtyFields,e)}const a=l(F.current.touchedFields,e);return t&&!a&&(P(F.current.touchedFields,e,t),s.touchedFields=F.current.touchedFields,u=u||A.current.touchedFields&&a!==t),u&&n&&W.current.state.next(s),u?s:{}},[]),re=r.useCallback(async(e,r)=>{const t=(await xe(l(B.current,e),K,p))[e];return X(r,e,t),o(t)},[K]),ae=r.useCallback(async e=>{const{errors:r}=await V.current($(B),T.current,be(z.current.mount,B.current,O,p));if(e)for(const t of e){const e=l(r,t);e?P(F.current.errors,t,e):te(F.current.errors,t)}else F.current.errors=r;return r},[O,p]),ce=async(e,r,t={valid:!0})=>{for(const n in e){const s=e[n];if(s){const e=s._f,n=k(s,"_f");if(e){const n=await xe(s,K,p);if(r){if(n[e.name]){t.valid=!1;break}}else n[e.name]?P(F.current.errors,e.name,n[e.name]):te(F.current.errors,e.name)}n&&await ce(n,r,t)}}return t.valid},ie=r.useCallback(async(e,r={})=>{const t=S(e);let n;if(W.current.state.next({isValidating:!0}),d){const r=await ae(o(e)?e:t);n=e?t.every(e=>!l(r,e)):C(r)}else e?n=(await Promise.all(t.filter(e=>l(B.current,e,{})._f).map(async e=>await re(e,!0)))).every(Boolean):(await ce(B.current),n=C(F.current.errors));return W.current.state.next(Object.assign(Object.assign({},ge(e)?{name:e}:{}),{errors:F.current.errors,isValidating:!1})),r.shouldFocus&&!n&&U(B.current,e=>l(F.current.errors,e),t),A.current.isValid&&fe(),n},[ae,re]),le=(e,r)=>{const t=l(B.current,e);if(t){const n=o(t._f.value),s=n?l(M.current,e):t._f.value;o(s)?n&&(t._f.value=de(t)):r&&r.defaultChecked?t._f.value=de(t):c(z.current.array,e)?t._f.value=s:Y(e,s)}L.current&&A.current.isValid&&fe()},fe=r.useCallback(async(e={})=>{const r=d?C((await V.current(Object.assign(Object.assign({},$(B)),e),T.current,be(z.current.mount,B.current,O,p))).errors):await ce(B.current,!0);r!==F.current.isValid&&W.current.state.next({isValid:r})},[O,p]),me=r.useCallback((e,r,t)=>Object.entries(r).forEach(([r,n])=>{const s=`${e}.${r}`,u=l(B.current,s);z.current.array.has(e)||!q(n)||u&&!u._f?me(s,n,t):Y(s,n,t,!0,!u)}),[ie]),he=r.useCallback(async({type:e,target:r,target:{value:n,type:u}})=>{let c,i,b=r.name;const y=l(B.current,b);if(y){let m=u?de(y):void 0;m=o(m)?n:m;const h=e===f,{isOnBlur:v,isOnChange:x}=Oe(s),w=(g=y._f,!(y._f.mount&&g&&(g.required||g.min||g.max||g.maxLength||g.minLength||g.pattern||g.validate)||d||l(F.current.errors,b))||(({isOnBlur:e,isOnChange:r,isOnTouch:t,isTouched:n,isReValidateOnBlur:s,isReValidateOnChange:u,isBlurEvent:a,isSubmitted:c,isOnAll:i})=>!i&&(!c&&t?!(n||a):(c?s:e)?!a:!(c?u:r)||a))(Object.assign({isBlurEvent:h,isTouched:!!l(F.current.touchedFields,b),isSubmitted:F.current.isSubmitted,isReValidateOnBlur:v,isReValidateOnChange:x},J))),j=!h&&Q(b);o(m)||(y._f.value=m);const A=ee(b,y._f.value,h,!1),k=!C(A)||j;if(w)return!h&&W.current.watch.next({name:b,type:e,values:ve()}),k&&W.current.state.next(j?{name:b}:Object.assign(Object.assign({},A),{name:b}));if(W.current.state.next({isValidating:!0}),d){const{errors:e}=await V.current($(B),T.current,be([b],B.current,O,p));if(c=l(e,b),t(r)&&!c){const r=a(b),t=l(e,r,{});t.type&&t.message&&(c=t),(t||l(F.current.errors,r))&&(b=r)}i=C(e)}else c=(await xe(y,K,p))[b];!h&&W.current.watch.next({name:b,type:e,values:ve()}),X(!1,b,c,A,i,j)}var g},[]),ve=e=>{const r=Object.assign(Object.assign({},M.current),$(B));return o(e)?r:ge(e)?l(r,e):e.map(e=>l(r,e))},pe=r.useCallback((e,r,t,n)=>{const s=Array.isArray(e),u=n||L.current?Object.assign(Object.assign({},M.current),n||$(B)):o(r)?M.current:s?r:{[e]:r};if(o(e))return t&&(z.current.watchAll=!0),u;const a=[];for(const r of S(e))t&&z.current.watch.add(r),a.push(l(u,r));return s?a:a[0]},[]),je=(e,r={})=>{for(const t of e?S(e):z.current.mount)z.current.mount.delete(t),z.current.array.delete(t),l(B.current,t)&&(!r.keepError&&te(F.current.errors,t),!r.keepValue&&te(B.current,t),!r.keepDirty&&te(F.current.dirtyFields,t),!r.keepTouched&&te(F.current.touchedFields,t),!r.keepDefaultValue&&te(M.current,t),W.current.watch.next({name:t,values:ve()}));W.current.state.next(Object.assign(Object.assign({},F.current),r.keepDirty?{isDirty:Z()}:{})),!r.keepIsValid&&fe()},Ae=(e,r,n)=>{Fe(e,n);let s=l(B.current,e);const u=(e=>ue(e)||t(e))(r);r===s._f.ref||u&&i(s._f.refs||[]).find(e=>e===r)||(s={_f:u?Object.assign(Object.assign({},s._f),{refs:[...i(s._f.refs||[]).filter(e=>we(e)&&document.contains(e)),r],ref:{type:r.type,name:e}}):Object.assign(Object.assign({},s._f),{ref:r})},P(B.current,e,s),le(e,r))},Fe=r.useCallback((e,r={})=>{const t=l(B.current,e);return P(B.current,e,{_f:Object.assign(Object.assign(Object.assign({},t&&t._f?t._f:{ref:{name:e}}),{name:e,mount:!0}),r)}),z.current.mount.add(e),!t&&le(e),Ve?{name:e}:{name:e,onChange:he,onBlur:he,ref:t=>{if(t)Ae(e,t,r);else{const t=l(B.current,e,{}),n=x||r.shouldUnregister;t._f&&(t._f.mount=!1,o(t._f.value)&&(t._f.value=t._f.ref.value)),n&&(!c(z.current.array,e)||!I.current)&&z.current.unMount.add(e)}}}},[]),_e=r.useCallback((e,r)=>async t=>{t&&(t.preventDefault&&t.preventDefault(),t.persist&&t.persist());let n=!0,s=$(B);W.current.state.next({isSubmitting:!0});try{if(d){const{errors:e,values:r}=await V.current(s,T.current,be(z.current.mount,B.current,O,p));F.current.errors=e,s=r}else await ce(B.current);C(F.current.errors)&&Object.keys(F.current.errors).every(e=>l(s,e))?(W.current.state.next({errors:{},isSubmitting:!0}),await e(s,t)):(r&&await r(F.current.errors,t),v&&U(B.current,e=>l(F.current.errors,e),z.current.mount))}catch(e){throw n=!1,e}finally{F.current.isSubmitted=!0,W.current.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:C(F.current.errors)&&n,submitCount:F.current.submitCount+1,errors:F.current.errors})}},[v,K,O,p]),Ce=(e,r="")=>{for(const t in e){const n=e[t],s=r+(r?".":"")+t,a=l(B.current,s);a&&a._f||(u(n)||Array.isArray(n)?Ce(n,s):a||Fe(s,{value:n}))}};return r.useEffect(()=>{const e=W.current.state.subscribe({next(e){R(e,A.current,!0)&&(F.current=Object.assign(Object.assign({},F.current),e),j(F.current))}}),r=W.current.array.subscribe({next(e){if(e.values&&e.name&&A.current.isValid){const r=$(B);P(r,e.name,e.values),fe(r)}}});return()=>{e.unsubscribe(),r.unsubscribe()}},[]),r.useEffect(()=>{const e=e=>!we(e)||!document.contains(e);L.current||(L.current=!0,A.current.isValid&&fe(),!x&&Ce(M.current));for(const r of z.current.unMount){const t=l(B.current,r);t&&(t._f.refs?t._f.refs.every(e):e(t._f.ref))&&je(r)}z.current.unMount=new Set}),{control:r.useMemo(()=>({register:Fe,inFieldArrayActionRef:I,getIsDirty:Z,subjectsRef:W,watchInternal:pe,fieldsRef:B,updateIsValid:fe,namesRef:z,readFormStateRef:A,formStateRef:F,defaultValuesRef:M,fieldArrayDefaultValuesRef:N,unregister:je,shouldUnmount:x}),[]),formState:_(E,w,A),trigger:ie,register:Fe,handleSubmit:_e,watch:r.useCallback((e,r)=>ye(e)?W.current.watch.subscribe({next:t=>e(pe(void 0,r),t)}):pe(e,r,!0),[]),setValue:r.useCallback((e,r,t={})=>{const s=l(B.current,e),u=z.current.array.has(e);u&&(W.current.array.next({values:r,name:e,isReset:!0}),(A.current.isDirty||A.current.dirtyFields)&&t.shouldDirty&&(P(F.current.dirtyFields,e,G(r,l(M.current,e,[]),l(F.current.dirtyFields,e,[]))),W.current.state.next({name:e,dirtyFields:F.current.dirtyFields,isDirty:Z(e,r)})),!r.length&&P(B.current,e,[])&&P(N.current,e,[])),(s&&!s._f||u)&&!n(r)?me(e,r,u?{}:t):Y(e,r,t,!0,!s),Q(e)&&W.current.state.next({}),W.current.watch.next({name:e,values:ve()})},[me]),getValues:r.useCallback(ve,[]),reset:r.useCallback((e,r={})=>{const t=e||M.current;if(D&&!r.keepValues)for(const e of z.current.mount){const r=l(B.current,e);if(r&&r._f){const e=Array.isArray(r._f.refs)?r._f.refs[0]:r._f.ref;try{we(e)&&e.closest("form").reset();break}catch(e){}}}!r.keepDefaultValues&&(M.current=Object.assign({},t)),r.keepValues||(B.current={},W.current.control.next({values:r.keepDefaultValues?M.current:Object.assign({},t)}),W.current.watch.next({values:Object.assign({},t)}),W.current.array.next({values:Object.assign({},t),isReset:!0})),z.current={mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1},W.current.state.next({submitCount:r.keepSubmitCount?F.current.submitCount:0,isDirty:r.keepDirty?F.current.isDirty:!!r.keepDefaultValues&&H(e,M.current),isSubmitted:!!r.keepIsSubmitted&&F.current.isSubmitted,dirtyFields:r.keepDirty?F.current.dirtyFields:{},touchedFields:r.keepTouched?F.current.touchedFields:{},errors:r.keepErrors?F.current.errors:{},isSubmitting:!1,isSubmitSuccessful:!1}),L.current=!!r.keepIsValid},[]),clearErrors:r.useCallback(e=>{e?S(e).forEach(e=>te(F.current.errors,e)):F.current.errors={},W.current.state.next({errors:F.current.errors})},[]),unregister:r.useCallback(je,[]),setError:r.useCallback((e,r,t)=>{const n=((l(B.current,e)||{_f:{}})._f||{}).ref;P(F.current.errors,e,Object.assign(Object.assign({},r),{ref:n})),W.current.state.next({name:e,errors:F.current.errors,isValid:!1}),t&&t.shouldFocus&&n&&n.focus&&n.focus()},[]),setFocus:r.useCallback(e=>l(B.current,e)._f.ref.focus(),[])}},exports.useFormContext=F,exports.useFormState=B,exports.useWatch=function(e){const{control:t,name:n,defaultValue:s}=e||{},u=F(),a=r.useRef(n);a.current=n;const{watchInternal:c,subjectsRef:i}=t||u.control,[l,f]=r.useState(o(s)?c(n):s);return r.useEffect(()=>{c(n);const e=i.current.watch.subscribe({next:({name:e,values:r})=>(!a.current||!e||S(a.current).some(r=>e&&r&&(r.startsWith(e)||e.startsWith(r))))&&f(c(a.current,s,!1,r))});return()=>e.unsubscribe()},[]),l};
//# sourceMappingURL=index.cjs.js.map
